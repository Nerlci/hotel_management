---
title: 需求分析
---

## 结合场景的需求分析

廉价酒店计费系统，基本消费内容：住宿，增值服务：简餐、空调。

### 住宿

两种规格
1. 以小时为单位（最小 1 小时，最多 3 小时）
2. 以天为单位（最小一天，无上限）

消费者只有购买了住宿服务才可购买增值服务。
因为是廉价酒店，所以只有一种房型。房间数量有上限，当订房人数过多时，可能不能满足所有用户的需求。

### 增值服务

#### 简餐

按食物种类、数量计费，每天每种食品数量有上限。

#### 空调

按功率计费，功率由风速、温度两个变量结合一个公式计算得出。
同一时间内整个酒店所有房间空调功率有上限，出现竞争的情况下按照 FIFO 方式调度。

## 功能设计

### 不同客户端的功能如下
1. 用户终端：可以进行房间预定，空调控制，点餐操作。
2. 前台终端：接受房间预定并分配房间。提前一天填写第二天菜单，用户点餐后收到提醒。
客人 checkout 时能够按照房间号查询入住期间的消费以及详单。
3. 控制后台：有最高权限，可以查看、修改所有信息，可以显示统计信息和日志信息。

### DDD（领域模型驱动的架构设计）

#### UI 层

> 各个角色的使用者操作的界面

TODO

#### 应用层

> 事件发生后进行处理的业务逻辑

- 系统能够在接收到房间预定后自动安排房间，采用客人入住尽可能最稀疏的分配方式。
- 用户控制空调温度和风速，如果当前修改发生后空调功率超过上限，则将当前修改入队，
依次满足需求。
- 用户点餐后，系统判断该食物是否有剩余，如果有，通知前台工作人员准备食物，
如果没有，则通知用户该菜品售罄。

#### 领域层

> 记录数据

- 空调的功率消耗由温度和风速共同构成，酒店整体空调功率有上限，按照 FIFO 方式调度。
- 每天酒店供应食物种类和数量有限制，不同种类的食物一份价格不同。
- 酒店房间数有上限，每间房只能住一个客人。

#### 基础设施层

> 数据库表结构设计

TODO

